{"source":"webpackJsonp([28],{AaRD:function(t,e){t.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QzExNEJCQThEQ0RGMTFFODk2NTk4MjEzRDhBNzJERTMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QzExNEJCQTlEQ0RGMTFFODk2NTk4MjEzRDhBNzJERTMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpDMTE0QkJBNkRDREYxMUU4OTY1OTgyMTNEOEE3MkRFMyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpDMTE0QkJBN0RDREYxMUU4OTY1OTgyMTNEOEE3MkRFMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PmvIfuwAAATSSURBVHja7Jp3aBVBEMbvhdg1Fuyo2BEFO2LHEkVFscWGPUoExYaiUbH+YcVeiViwoNjFggqCFSzYIypYiL1gj708v9HvcAnJ2yt7asCBH3v3bm92Z8vs7N4LhcNhKzNLlJXJJdMbEO1XQVJSktoYZUBtUBUUBzn47AO4Dy6CcyAF/By7CQkJf9cASHYQB3qAWJBVk/8jOAQ2gJ3gq5/CQ34mMVq/DZL5oKLy8xVwAtwE7/hbHlABNAaVlLyXwXD0wpE/agAqLq0+FwzmTw/ARrbqVfA9Qo/L8OoDuoMi/H0mmAhDvgZuACov4/owqMeKLgXjQarLsguAOSCe9/tBe7dGRLmsfC4ke1j5p0CG0DAPlRd5AQaAruAtdW0K2o0uB805ZJqgtQ769QDQsRVJaxoRh0ZaEIgBUDwaSW96jW4o+JopXw5dJzknRIajrHijBkBheSSTeTuKBRoV6JQ5MIm3k1FmUZM9MBDkBgfA4gAX1lngAigFehoxgC0xgLfz0FJhh3rrgP6gL6jpsBc+I5nB20EoO6evlRgKQuLaQEFwChx1UA8JJRbRU9ki7vYIPdZVzftHGWrIwteE7tVzD5QELWw/zRaKJA3AMVZeXOtZxj6fQDM+q6HpBXHP+3jbEo1Y0I8BEiJU4/UZTd7CYC0DuOPsiTpKep6L1zIlyMtITjNtxUbxbIB0YwnwBdzS5O0EyjO+6QhuKM+SQTtwB9QFHTS6bjItkybOcm1Afkabb8ArTd5YpuvA83SeP2S8JFJfo+sZeM/ItogfA+xJHo4QoNl68vI6JUK+60yLOQi5P/E6xo8Brzl8JBzOFyHfd2WIVYuQry7T25py83LdsWMmzwZIuHAXZEsTx2fk/uxFr3I6z+vzmUWXGkmqgCzgMevg2YBkxSPU0+TdzJ1WUa7YnTiHxA32Ars5n7bpfDukIdM9DN29GQCf/JBKRNrBJ+eOkD3MFk7m+rGdXkeG1noaIr2UoFk8CyFpy9sdqMN9v7GQtOoTju1amrz3QCPu1h5xLMfwdwkGW4KXGh2y4JXm0NFuNbUGoAVkEq2yQ10HBou7HU3/XZNbSLmeBj5rWj+a4cbPW5T90VQ0uoFDpCMKaerwnVRGllfoFp1IV072FzyxMBNOc/Oy2kUveJUxTFeizBTTW8q5bNX26IXOpmsOnSM4z+5ys292S8leWMjbRCexuovKi9cax9s5KOt5UJv6WfQOtQ0PpUmMZg8zWg30XKgDJ9g7TrjLPisvx5Jbed0IrX8iyGMVGUq7uOrKGdEKaQQflS+hDMvpbivvyQDKWC5uEl6M9GGAOIbiXL1neFHgyQC0lHiKoUolGnpQ059+X9aIgdCZ+scMUE7UbHcnQ6mQi9fllHqp3ZvQddprPfx+oZnA/a+Ev7MdvhOj7Iu3oPKL/FTAlwEoXDY7/biFlHSEg9cW0uBLyv7A+ls9YO+uBvF6PiPOjCQxjcFv/wUDLMb+icp8KJtOni6Kp5EPIxdNFGzyK6Ws0gt4FLJd2dNaDKnX8nqIjH1ThZr+zCprwhpQnVtIEYmZdjCd4jZU0Em0ZV7ieYoRR1cpp3HlwBIw1XRhQRggIh8r9lq/PwIuVnZamcKAb9av48XlPBoZF9QOKPT/zx7/DfAnPwQYANdiTvp90JXJAAAAAElFTkSuQmCC\"},Z34o:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=a(\"woOf\"),o=a.n(i),s=a(\"mvHQ\"),r=a.n(s),c={data:function(){return{orderfail:!1,xscoupon:!1,couponCode:\"\",imageSrc:this.global_.imgurl,indeterminate:!0,checkAll:!1,checkAllGroup:[],totalPrice:0,cartList:[],editface:!0,zslcount:0,temp:[],addressList:{},youdizhi:!1,tempcart:[],productItemIds:[],modelIds:[],quantitys:[],couponshow:!0,couponmsg:{availableSku:\"\",availableCatalog:\"\",modeValue:\"\",couponMode:\"\"},origintotal:{price:0},total:{price:0,num:0},freight:0,orderfrom:\"B\",useCouponMsg:\"\",beizhu:\"\"}},methods:{jisuan:function(t){var i=this;if(null!=this.cartList)if(null==t)i.total.num=0,this.cartList.forEach(function(t,e){i.origintotal.price+=t.originSalePrice*t.quantity,i.total.price+=t.salePrice*t.quantity,i.total.num+=t.quantity});else{i.total.num=0,this.cartList.forEach(function(t,e){i.total.num+=t.quantity});var o=t;\"\"==o.availableSku&&\"\"==o.availableCatalog&&\"\"==o.availableModel?(i.total.price=0,\"rate\"==o.couponMode?this.cartList.forEach(function(t,e){\"\"!=t.promotionTitle&&null!=t.promotionTitle&&null!=t.promotionTitle||(t.salePrice=t.salePrice*(1-o.modeValue)),i.total.price+=t.salePrice*t.quantity}):this.cartList.forEach(function(t,e){\"\"!=t.promotionTitle&&null!=t.promotionTitle&&null!=t.promotionTitle||(t.salePrice=t.salePrice-o.modeValue),i.total.price+=t.salePrice*t.quantity})):\"\"!=o.availableSku?(i.total.price=0,\"rate\"==o.couponMode?this.cartList.forEach(function(t,e){t.id==o.availableSku&&(t.salePrice=t.salePrice*(1-o.modeValue)),i.total.price+=t.salePrice*t.quantity}):this.cartList.forEach(function(t,e){t.id==o.availableSku&&(t.salePrice=t.salePrice-o.modeValue),i.total.price+=t.salePrice*t.quantity})):\"\"!=o.availableModel?(i.total.price=0,\"rate\"==o.couponMode?this.cartList.forEach(function(t,e){t.productId==o.availableModel&&(t.salePrice=t.salePrice*(1-o.modeValue)),i.total.price+=t.salePrice*t.quantity}):this.cartList.forEach(function(t,e){t.productId==o.availableModel&&(t.salePrice=t.salePrice-o.modeValue),i.total.price+=t.salePrice*t.quantity})):(i.total.price=0,\"rate\"==o.couponMode?this.cartList.forEach(function(t,e){t.productType==o.availableCatalog&&(t.salePrice=t.salePrice*(1-o.modeValue)),i.total.price+=t.salePrice*t.quantity}):this.cartList.forEach(function(t,e){t.productType==o.availableCatalog&&(t.salePrice=t.salePrice-o.modeValue),i.total.price+=t.salePrice*t.quantity}))}},getDD:function(){var e=this,t=this.$route.params.address,i=\"\";null!=t&&(this.addressList=t,this.youdizhi=!0,i=t.receiveProvince);var o=[],a=[],s=[];this.cartList.forEach(function(t,e){o.push(t.salePrice),a.push(t.quantity),s.push(t.productCatalog)}),this.$axios({method:\"post\",url:\"/order/getShipPrice\",data:{price:o,province:i,quantity:a,typeIds:s}}).then(function(t){200==t.code&&(e.freight=t.object)})},getCartList:function(){if(this.cartList=JSON.parse(sessionStorage.getItem(\"cart\")),null!=this.cartList){var i=this;i.productItemIds=[],i.quantitys=[];var o=0;this.cartList.forEach(function(t,e){\"\"!=t.promotionTitle&&null!=t.promotionTitle&&(o+=1),i.productItemIds.push(t.id),i.quantitys.push(t.quantity),i.modelIds.push(t.productId)}),this.cartList.length==o?this.couponshow=!1:this.couponshow=!0}},addAdd:function(){localStorage.setItem(\"fromc\",\"dingdan\"),this.$router.push({name:\"/user/address\"})},getAddress:function(){var e=this;this.$axios({method:\"post\",url:\"/address\"}).then(function(t){0<t.length&&t.map(function(t){\"Y\"==t.isDefault&&\"{}\"==r()(e.addressList)&&(e.addressList=t,e.youdizhi=!0)})})},confirm:function(){var e=this;if(null!=this.addressList.id){var t={addressId:this.addressList.id,productItemIds:this.productItemIds,couponCode:this.couponCode,remark:this.beizhu,type:this.orderfrom,quantity:this.quantitys,modelIds:this.modelIds};this.$axios({method:\"post\",url:\"/order/shopping/confirm\",data:t}).then(function(t){\"200\"==t.code?(sessionStorage.removeItem(\"cart\"),e.$router.push({name:\"/cartthree\",query:{orderNo:t.object.orderAddress.orderNo}})):e.$Modal.error({title:\"失败提示\",content:t.msg})})}else this.$Modal.error({content:\"收货地址不能为空\"})},usecoupon:function(){var e=this;this.xscoupon=!1;if(this.couponCode=this.$refs.couponValue.value,\"\"!=this.couponCode){var t={modelIds:this.modelIds,productItemIds:this.productItemIds,couponCode:this.couponCode,quantity:this.quantitys};this.$axios({method:\"post\",url:\"/promotion/coupon\",data:t}).then(function(t){e.cartList=JSON.parse(sessionStorage.getItem(\"cart\")),\"200\"==t.code?(e.xscoupon=!0,e.couponmsg=o()({},t.object),e.jisuan(e.couponmsg),e.useCouponMsg=\"\"):(e.xscoupon=!1,e.useCouponMsg=t.object,e.$Message.error(t.object))})}else this.$Message.error(\"优惠码不能为空\")}},mounted:function(){this.orderfrom=localStorage.getItem(\"orderfrom\"),this.cartList=JSON.parse(sessionStorage.getItem(\"cart\")),null==this.cartList?this.$router.push({name:\"/cart\"}):(this.getDD(),this.getAddress(),this.getCartList(),this.jisuan())}},l={render:function(){var i=this,t=i.$createElement,o=i._self._c||t;return o(\"div\",{staticClass:\"paymoney\"},[o(\"div\",{staticClass:\"wap_header\"},[o(\"router-link\",{attrs:{to:\"/cart\"}},[o(\"Icon\",{attrs:{type:\"ios-arrow-back\"}}),i._v(\"确认订单\\n\\t\\t\")],1)],1),i._v(\" \"),o(\"div\",{staticClass:\"chooseAddress pt44\"},[i.youdizhi?o(\"ul\",{staticClass:\"address\"},[o(\"li\",{on:{click:i.addAdd}},[o(\"img\",{attrs:{src:a(\"AaRD\")}}),i._v(\" \"),o(\"p\",[o(\"strong\",[i._v(i._s(i.addressList.person)+\" \"),o(\"label\",[i._v(i._s(i.addressList.phone))])]),i._v(\" \"),o(\"span\",[i._v(i._s(i.addressList.receiveProvince)+i._s(i.addressList.receiveCity)+i._s(i.addressList.receiveDistrict)+i._s(i.addressList.address))])]),i._v(\" \"),o(\"Icon\",{attrs:{type:\"md-arrow-round-forward\"}})],1)]):o(\"div\",{staticClass:\"zeroAddress\"},[o(\"div\",{on:{click:i.addAdd}},[i._v(\"\\n\\t\\t\\t\\t请选择收货地址>\\n\\t\\t\\t\\t\"),o(\"Icon\",{staticClass:\"float float1\",attrs:{type:\"ios-arrow-right\"}})],1)])]),i._v(\" \"),o(\"h6\",[i._v(\"商品及优惠\")]),i._v(\" \"),o(\"div\",{staticClass:\"carttwo\"},i._l(i.cartList,function(t,e){return o(\"Row\",{key:e,staticClass:\"cartCol\",attrs:{span:\"24\"}},[o(\"i-col\",{attrs:{span:\"6\"}},[o(\"img\",{staticClass:\"cartImg\",attrs:{src:i.imageSrc+t.image}})]),i._v(\" \"),o(\"i-col\",{attrs:{span:\"18\"}},[o(\"p\",{staticClass:\"cart_black clearfix\"},[i._v(\"\\n\\t\\t\\t\\t\\t\"+i._s(t.itemNo)+\"\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t\"),null==t.promotionTitle&&i.xscoupon?o(\"span\",{staticStyle:{float:\"right\",color:\"#f00\"}},[o(\"label\",{staticStyle:{\"text-decoration\":\"line-through\"}},[i._v(\"￥\"+i._s(i._f(\"pricefilter\")(t.originSalePrice)))]),i._v(\" \"),o(\"label\",{staticClass:\"color-dx\"},[i._v(\"￥\"+i._s(i._f(\"pricefilter\")(t.salePrice)))])]):o(\"span\",{staticStyle:{float:\"right\",color:\"#f00\"}},[i._v(\"￥\"+i._s(i._f(\"pricefilter\")(t.originSalePrice)))])]),i._v(\" \"),o(\"p\",[o(\"span\",{staticClass:\"title\"},[i._v(i._s(t.productName))]),o(\"span\",{staticClass:\"num\"},[i._v(\"x\"+i._s(t.quantity)+\"\\n\\t\\t\\t\\t       \\t \")])]),i._v(\" \"),o(\"p\"),i._v(\" \"),o(\"p\",{staticClass:\"cart_attr\"},[i._v(\"\\n\\t\\t\\t\\t\\t\"+i._s(t.productAttr)+\"\\n\\t\\t\\t\\t\")]),i._v(\" \"),o(\"div\",{staticClass:\"cart_gray\"},[null!=t.promotionTitle?o(\"p\",{staticClass:\"promotion\"},[i._v(\"\\n\\t\\t\\t\\t\\t\\t\"+i._s(t.promotionTitle)+\"\\n\\t\\t\\t\\t\\t\")]):i._e()])])],1)})),i._v(\" \"),o(\"dl\",{directives:[{name:\"show\",rawName:\"v-show\",value:i.couponshow,expression:\"couponshow\"}],staticClass:\"yhm\"},[o(\"dt\",[i._v(\"优惠券\")]),o(\"dd\",[o(\"input\",{directives:[{name:\"model\",rawName:\"v-model.trim\",value:i.couponCode,expression:\"couponCode\",modifiers:{trim:!0}}],ref:\"couponValue\",attrs:{type:\"text\",placeholder:\"优惠券\"},domProps:{value:i.couponCode},on:{input:function(t){t.target.composing||(i.couponCode=t.target.value.trim())},blur:function(t){i.$forceUpdate()}}}),i._v(\" \"),o(\"span\",{staticClass:\"use\",on:{click:i.usecoupon}},[i._v(\"使用\")]),i._v(\" \"),o(\"span\",{staticClass:\"color-dx\"},[i._v(\"已优惠:-￥\"+i._s(i._f(\"pricefilter\")(i.origintotal.price-i.total.price)))])])]),i._v(\" \"),o(\"dl\",{staticClass:\"bd1\"},[o(\"dt\",[i._v(\"配送方式\")]),o(\"dd\",[o(\"span\",{staticClass:\"color-dx\"},[i._v(\"快递费用￥\"+i._s(i._f(\"pricefilter\")(i.freight)))])])]),i._v(\" \"),o(\"dl\",[o(\"dt\",[i._v(\"备注留言\")]),o(\"dd\",[o(\"textarea\",[i._v(i._s(i.beizhu))])])]),i._v(\" \"),o(\"div\",{staticClass:\"cartfoot\"},[o(\"button\",{attrs:{type:\"button\"},on:{click:i.confirm}},[i._v(\" \\n\\t\\t\\t提交订单\\n\\t\\t\")]),i._v(\" \"),o(\"strong\",[i._v(\"合计:\"),o(\"span\",{staticClass:\"color-dx\"},[i._v(\"￥\"+i._s(i._f(\"pricefilter\")(i.total.price+i.freight)))])])])])},staticRenderFns:[]};var n=a(\"VU/8\")(c,l,!1,function(t){a(\"tpLB\")},\"data-v-467af7ec\",null);e.default=n.exports},tpLB:function(t,e){}});"}