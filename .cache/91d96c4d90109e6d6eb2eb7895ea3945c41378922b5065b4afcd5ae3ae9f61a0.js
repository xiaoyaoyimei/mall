{"source":"webpackJsonp([15],{R9o2:function(t,s){},UDn0:function(t,s,e){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0});var i=e(\"mvHQ\"),a=e.n(i),r={data:function(){return{day:0,hr:0,min:0,sec:0,jsqtime:0,detail:{productItem:{salePrice:0},product:{},crush:{salePrice:0}},skuId:\"\",quantity:1,loading:!0,youdizhi:!1,proId:\"\",productDesc:[],productimg:[],temp:\"\",addressList:{}}},methods:{countdown:function(){var t=Date.parse(new Date(this.jsqtime))-Date.parse(new Date);0==t&&(this.detail.switch=1,this.jsqtime=this.detail.crush.endTime);var s=parseInt(t/1e3/60/60/24),e=parseInt(t/1e3/60/60%24),i=parseInt(t/1e3/60%60),a=parseInt(t/1e3%60);this.day=s,this.hr=9<e?e:\"0\"+e,this.min=9<i?i:\"0\"+i,this.sec=9<a?a:\"0\"+a;var r=this;this.t=setTimeout(function(){r.countdown()},1e3)},getDD:function(){var t=this.$route.params.address;null!=t&&(this.addressList=t,this.youdizhi=!0)},addAdd:function(){localStorage.setItem(\"fromc\",\"miaosha\"),this.$router.push({name:\"/user/address\"})},getAddress:function(){var t=localStorage.getItem(\"token\");if(null!=t&&null!=t){var s=this;this.$axios({method:\"post\",url:\"/address\"}).then(function(t){0<t.length&&t.map(function(t){\"Y\"==t.isDefault&&\"{}\"==a()(s.addressList)&&(s.addressList=t,s.youdizhi=!0)})})}},confirm:function(){var s=this,t={addressId:this.addressList.id,quantity:this.quantity,skuId:this.temp};this.$axios({method:\"post\",url:\"/promotion/crush/confirm\",data:t}).then(function(t){\"200\"==t.code?(localStorage.removeItem(\"skuId\"),s.$router.push({name:\"/cartthree\",query:{orderNo:t.msg}})):s.$Message.error(t.object)})},getDetail:function(){var s=this;null!=this.$route.query.skuId&&null!=this.$route.query.skuId&&(this.temp=this.$route.query.skuId,localStorage.setItem(\"skuId\",this.temp)),this.$axios({method:\"get\",url:\"/promotion/crush/\"+localStorage.getItem(\"skuId\")}).then(function(t){\"200\"==t.code&&(s.detail=t.object,\"0\"==s.detail.switch?s.jsqtime=s.detail.crush.startTime:s.jsqtime=s.detail.crush.endTime,s.countdown(),s.proId=t.object.productItem.productId,s.$axios({method:\"post\",url:\"/product/desc/\"+s.proId}).then(function(t){s.productDesc=t}),s.$axios({method:\"post\",url:\"/product/img/\"+s.proId}).then(function(t){s.productimg=t}))})}},mounted:function(){this.getAddress(),this.getDetail(),this.getDD()},destroyed:function(){clearTimeout(this.t)}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"font-16\"},[i(\"div\",{staticClass:\"m_header_bar\"},[i(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/seckill\"}},[i(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),e._v(\" \"),i(\"span\",{staticClass:\"m_header_bar_title\"},[e._v(\"秒杀详情\")])],1),e._v(\" \"),i(\"div\",{staticClass:\"detail\"},[i(\"div\",{staticClass:\"tp\"},[i(\"img\",{attrs:{src:e._f(\"imgfilter\")(e.detail.productItem.listImg)}}),e._v(\" \"),i(\"div\",{staticClass:\"cursh-wrap\"},[i(\"p\",{staticClass:\"jg\"},[i(\"span\",{staticClass:\"color-dx\"},[e._v(\"秒杀价:￥\"+e._s(e._f(\"pricefilter\")(e.detail.crush.salePrice)))]),e._v(\" \"),i(\"span\",{staticClass:\"yj\"},[e._v(\"原价:￥\"+e._s(e._f(\"pricefilter\")(e.detail.productItem.salePrice)))])]),e._v(\" \"),i(\"div\",{staticClass:\"djs\"},[0==e.detail.switch?i(\"p\",[e._v(\"距开始还有\")]):i(\"p\",[e._v(\"距结束还剩\")]),e._v(\" \"),i(\"span\",[e._v(e._s(e.day+\"天 \"+e.hr+\":\"+e.min+\":\"+e.sec))])])])]),e._v(\" \"),i(\"div\",{staticClass:\"chooseAddress\"},[e.youdizhi?i(\"ul\",{staticClass:\"address\"},[i(\"li\",[i(\"p\",[i(\"strong\",[e._v(e._s(e.addressList.person)+\" \"),i(\"label\",[e._v(e._s(e.addressList.phone))])]),e._v(\" \"),i(\"span\",[e._v(e._s(e.addressList.receiveProvince)+e._s(e.addressList.receiveCity)+e._s(e.addressList.receiveDistrict)+e._s(e.addressList.address))])]),e._v(\" \"),i(\"Icon\",{attrs:{type:\"chevron-right\"},nativeOn:{click:function(t){return e.addAdd(t)}}})],1)]):i(\"div\",{staticClass:\"zeroAddress\"},[i(\"div\",{on:{click:e.addAdd}},[e._v(\"\\n                \\t\\t请选择收货地址\\n                \\t\"),i(\"Icon\",{staticClass:\"float float1\",attrs:{type:\"ios-arrow-right\"}})],1)])]),e._v(\" \"),i(\"div\",{staticClass:\"xq\"},[i(\"p\",[e._v(e._s(e.detail.product.modelName))]),e._v(\" \"),i(\"div\",[e._v(\"数量 \"),i(\"InputNumber\",{attrs:{min:1,max:1*e.detail.crush.unitQuantity},model:{value:e.quantity,callback:function(t){e.quantity=t},expression:\"quantity\"}})],1)])]),e._v(\" \"),i(\"Tabs\",{staticClass:\"spjs\"},[i(\"TabPane\",{attrs:{label:\"商品介绍\"}},[i(\"ul\",e._l(e.productimg,function(t,s){return i(\"li\",{key:s},[i(\"img\",{attrs:{src:e._f(\"imgfilter\")(t.imgUrl)}})])}))]),e._v(\" \"),i(\"TabPane\",{attrs:{label:\"规格参数\"}},[i(\"ul\",{staticClass:\"gk\"},e._l(e.productDesc,function(t,s){return i(\"li\",{key:s},[i(\"span\",{staticClass:\"title\"},[e._v(e._s(t.attrCode)+\":\")]),e._v(\" \"),i(\"span\",{staticClass:\"neirong\"},[e._v(e._s(t.attrValue))])])}))])],1),e._v(\" \"),i(\"div\",{staticClass:\"foot\"},[1==e.detail.switch?i(\"button\",{staticClass:\"miaoshagou\",attrs:{type:\"button\"},on:{click:e.confirm}},[e._v(\"马上抢\")]):i(\"button\",{staticClass:\"btn-disabled\",attrs:{type:\"button\"}},[e._v(\"尚未开始\")])])],1)},staticRenderFns:[]};var o=e(\"VU/8\")(r,d,!1,function(t){e(\"R9o2\"),e(\"ixex\")},\"data-v-6f2e12f2\",null);s.default=o.exports},ixex:function(t,s){}});"}