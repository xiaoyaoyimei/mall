{"source":"webpackJsonp([32],{\"7lfH\":function(e,i){},L0Hl:function(e,i,o){\"use strict\";Object.defineProperty(i,\"__esModule\",{value:!0});var r=o(\"E4LH\"),t={data:function(){return{orderNo:\"\",addressOption:[],tempinvoice:{},invoiceForm:{orderNo:this.orderNo,invoiceTitle:\"\",invoiceType:\"增值税普通发票\",receivePerson:\"\",receivePhone:\"\",selectedOptionsAddr:[],bankName:\"\",bankNo:\"\",invoiceCode:\"\",receiveAddress:\"\",registerAddress:\"\"},ruleValidate:{invoiceTitle:[{required:!0,message:\"发票抬头不能为空\",trigger:\"blur\"}],receiveAddress:[{required:!0,message:\"详细地址不能为空\",trigger:\"blur\"}],receivePhone:[{required:!0,validator:function(e,i,o){null==i?o(new Error(\"手机号不能为空\")):Object(r.a)(i)?o():o(new Error(\"请输入正确的手机号\"))},trigger:\"blur\"}],receivePerson:[{required:!0,message:\"收票人姓名不能为空\",trigger:\"blur\"}],selectedOptionsAddr:[{required:!0,type:\"array\",message:\"请选择省市区\",trigger:\"change\"}]}}},methods:{goback:function(){this.$router.back(-1)},getParams:function(){this.invoiceForm.orderNo=this.$route.query.orderNo,this.getInvoice(this.$route.query.orderNo)},getInvoice:function(e){var o=this;this.$axios({method:\"get\",url:\"/order/\"+e}).then(function(e){if(\"\"!=e.shippingInvoice){var i=e.shippingInvoice;o.invoiceForm.invoiceTitle=i.invoiceTitle,o.invoiceForm.invoiceType=i.invoiceType,o.invoiceForm.receivePerson=i.receivePerson,o.invoiceForm.receivePhone=i.receivePhone,o.invoiceForm.selectedOptionsAddr=[i.receiveProvince,i.receiveCity,i.receiveDistrict],o.invoiceForm.bankName=i.bankName,o.invoiceForm.bankNo=i.bankNo,o.invoiceForm.invoiceCode=i.invoiceCode,o.invoiceForm.receiveAddress=i.receiveAddress,o.invoiceForm.registerAddress=i.registerAddress}})},getAddressOption:function(){var i=this;this.$axios({method:\"post\",url:\"/common/address\"}).then(function(e){i.addressOption=e})},addSubmit:function(){var o=this;this.$refs.invoiceForm.validate(function(e){if(e){var i=o.invoiceForm;i.receiveProvince=o.invoiceForm.selectedOptionsAddr[0],i.receiveCity=o.invoiceForm.selectedOptionsAddr[1],i.receiveDistrict=o.invoiceForm.selectedOptionsAddr[2],delete i.selectedOptionsAddr,o.$axios({method:\"post\",url:\"/order/invoice/save\",data:i}).then(function(e){\"200\"==e.code?(o.$Message.success(\"提交成功\"),o.$router.push({path:\"/order/detail\",query:{orderNo:o.invoiceForm.orderNo}})):o.$Message.error(e.msg)})}})}},mounted:function(){this.getParams(),this.getAddressOption()}},n={render:function(){var i=this,e=i.$createElement,o=i._self._c||e;return o(\"div\",{staticClass:\"order\"},[o(\"div\",{staticClass:\"m_header_bar\"},[o(\"span\",{staticClass:\"m_header_bar_back\",on:{click:function(e){i.goback()}}},[o(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),i._v(\" \"),o(\"span\",{staticClass:\"m_header_bar_title\"},[i._v(\"发票信息\")]),i._v(\" \"),o(\"span\",{staticClass:\"m_header_bar_menu\",on:{click:i.addSubmit}},[i._v(\"保存\")])]),i._v(\" \"),o(\"div\",{staticClass:\"P15 bg-white\"},[o(\"Form\",{ref:\"invoiceForm\",staticStyle:{background:\"#fff\"},attrs:{\"label-width\":100,model:i.invoiceForm,rules:i.ruleValidate}},[o(\"FormItem\",{attrs:{label:\"订单编号\",prop:\"orderNo\"}},[o(\"Input\",{attrs:{placeholder:\"订单编号\",value:i.invoiceForm.orderNo,disabled:\"\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"发票抬头\",prop:\"invoiceTitle\"}},[o(\"Input\",{model:{value:i.invoiceForm.invoiceTitle,callback:function(e){i.$set(i.invoiceForm,\"invoiceTitle\",e)},expression:\"invoiceForm.invoiceTitle\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"发票类型\",prop:\"invoiceType\"}},[o(\"RadioGroup\",{model:{value:i.invoiceForm.invoiceType,callback:function(e){i.$set(i.invoiceForm,\"invoiceType\",e)},expression:\"invoiceForm.invoiceType\"}},[o(\"Radio\",{attrs:{label:\"增值税普通发票\"}},[i._v(\"增值税普通发票\")]),i._v(\" \"),o(\"Radio\",{attrs:{label:\"增值税专用发票\"}},[i._v(\"增值税专用发票\")])],1)],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"收票人姓名\",prop:\"receivePerson\"}},[o(\"Input\",{attrs:{placeholder:\"收票人姓名\"},model:{value:i.invoiceForm.receivePerson,callback:function(e){i.$set(i.invoiceForm,\"receivePerson\",e)},expression:\"invoiceForm.receivePerson\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"收票人手机\",prop:\"receivePhone\"}},[o(\"Input\",{attrs:{placeholder:\"收票人手机\"},model:{value:i.invoiceForm.receivePhone,callback:function(e){i.$set(i.invoiceForm,\"receivePhone\",e)},expression:\"invoiceForm.receivePhone\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"所在地区\",prop:\"selectedOptionsAddr\"}},[o(\"Cascader\",{attrs:{data:i.addressOption},model:{value:i.invoiceForm.selectedOptionsAddr,callback:function(e){i.$set(i.invoiceForm,\"selectedOptionsAddr\",e)},expression:\"invoiceForm.selectedOptionsAddr\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"详细地址\",prop:\"receiveAddress\"}},[o(\"Input\",{attrs:{placeholder:\"详细地址\"},model:{value:i.invoiceForm.receiveAddress,callback:function(e){i.$set(i.invoiceForm,\"receiveAddress\",e)},expression:\"invoiceForm.receiveAddress\"}})],1),i._v(\" \"),\"增值税专用发票\"==i.invoiceForm.invoiceType?o(\"div\",[o(\"FormItem\",{attrs:{label:\"开户行名称\",prop:\"bankName\"}},[o(\"Input\",{attrs:{placeholder:\"开户行名称\"},model:{value:i.invoiceForm.bankName,callback:function(e){i.$set(i.invoiceForm,\"bankName\",e)},expression:\"invoiceForm.bankName\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"银行账号\",prop:\"bankNo\"}},[o(\"Input\",{attrs:{placeholder:\"银行账号\"},model:{value:i.invoiceForm.bankNo,callback:function(e){i.$set(i.invoiceForm,\"bankNo\",e)},expression:\"invoiceForm.bankNo\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"纳税人识别码\",prop:\"invoiceCode\"}},[o(\"Input\",{attrs:{placeholder:\"纳税人识别码\"},model:{value:i.invoiceForm.invoiceCode,callback:function(e){i.$set(i.invoiceForm,\"invoiceCode\",e)},expression:\"invoiceForm.invoiceCode\"}})],1),i._v(\" \"),o(\"FormItem\",{attrs:{label:\"注册地址\",prop:\"registerAddress\"}},[o(\"Input\",{attrs:{placeholder:\"注册地址\"},model:{value:i.invoiceForm.registerAddress,callback:function(e){i.$set(i.invoiceForm,\"registerAddress\",e)},expression:\"invoiceForm.registerAddress\"}})],1)],1):i._e()],1)],1)])},staticRenderFns:[]};var s=o(\"VU/8\")(t,n,!1,function(e){o(\"7lfH\")},\"data-v-32e8ab62\",null);i.default=s.exports}});"}