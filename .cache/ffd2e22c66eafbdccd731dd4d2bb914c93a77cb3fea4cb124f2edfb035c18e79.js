{"source":"webpackJsonp([34],{NkJZ:function(t,e){},furc:function(t,e,a){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i={render:function(){var i=this,t=i.$createElement,s=i._self._c||t;return s(\"div\",{staticClass:\"order photo\"},[s(\"div\",{staticClass:\"m_header_bar\"},[s(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/user/setting\"}},[s(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),i._v(\" \"),s(\"span\",{staticClass:\"m_header_bar_title\"},[i._v(\"修改头像  \")]),i._v(\" \"),s(\"span\",{staticClass:\"m_header_bar_menu\",on:{click:i.handlePhoto}},[i._v(\"保存\")])],1),i._v(\" \"),s(\"div\",{staticStyle:{\"margin-top\":\"1rem\",\"text-align\":\"center\"}},[i._l(i.uploadList,function(e){return s(\"div\",{staticClass:\"demo-upload-list\"},[\"finished\"===e.status?[e.url?s(\"img\",{staticClass:\"origin_tx\",attrs:{src:i._f(\"imgfilter\")(e.url)}}):s(\"img\",{staticClass:\"origin_tx\",attrs:{src:a(\"Icm4\")}}),i._v(\" \"),s(\"div\",{staticClass:\"demo-upload-list-cover\"},[s(\"Icon\",{attrs:{type:\"ios-eye-outline\"},nativeOn:{click:function(t){i.handleView(e)}}})],1)]:[e.showProgress?s(\"Progress\",{attrs:{percent:e.percentage,\"hide-info\":\"\"}}):i._e()]],2)}),i._v(\" \"),s(\"Upload\",{ref:\"upload\",staticStyle:{display:\"inline-block\",width:\"8rem\"},attrs:{\"default-file-list\":i.uploadList,\"show-upload-list\":!1,\"on-success\":i.handleSuccess,format:[\"jpg\",\"jpeg\",\"png\"],\"max-size\":5120,\"on-format-error\":i.handleFormatError,\"on-exceeded-size\":i.handleMaxSize,type:\"drag\",action:i.uploadUrl}},[s(\"div\",{staticStyle:{width:\"8rem\",height:\"8rem\",\"line-height\":\"8rem\"}},[s(\"Icon\",{attrs:{type:\"camera\",size:\"20\"}})],1)]),i._v(\" \"),s(\"modal\",{attrs:{title:\"查看 头像大图\"},model:{value:i.visible,callback:function(t){i.visible=t},expression:\"visible\"}},[i.visible?s(\"img\",{staticStyle:{width:\"100%\"},attrs:{src:i._f(\"imgfilter\")(i.bigimg)}}):i._e()])],2)])},staticRenderFns:[]};var s=a(\"VU/8\")({data:function(){return{visible:!1,uploadList:[{url:\"\"}],iconUrl:\"\",uploadUrl:this.$axios.defaults.baseURL+\"/upload/upload?path=account\"}},methods:{handleView:function(t){this.bigimg=t.url,this.visible=!0},handleFormatError:function(t){this.$Notice.warning({title:\"文件格式不符要求\",desc:\"该 \"+t.name+\" 文件不正确, 请选择 .jpg 或者.png文件\"})},handleMaxSize:function(t){this.$Notice.warning({title:\"文件过大\",desc:\"该  \"+t.name+\" 文件过大, 请小于 5M.\"})},handleSuccess:function(t){\"200\"==t.code&&(this.uploadList[0].url=t.msg,this.iconUrl=t.msg)},handlePhoto:function(){var e=this;this.$axios({method:\"post\",url:\"/account/update\",data:{iconUrl:this.iconUrl}}).then(function(t){\"200\"==t.code&&(e.$Message.success(\"修改头像成功\"),e.$router.push(\"/user/setting\"))})},getParams:function(){var t=this.$route.query.iconUrl;this.iconUrl=t,this.uploadList[0].url=this.iconUrl}},mounted:function(){this.getParams()}},i,!1,function(t){a(\"NkJZ\")},null,null);e.default=s.exports}});"}