{"source":"webpackJsonp([18],{\"5euh\":function(t,s){},UDn0:function(t,s,i){\"use strict\";Object.defineProperty(s,\"__esModule\",{value:!0});var e=i(\"mvHQ\"),a=i.n(e),r={data:function(){return{day:0,hr:0,min:0,sec:0,jsqtime:0,detail:{productItem:{salePrice:0},product:{},crush:{salePrice:0}},skuId:\"\",quantity:1,loading:!0,youdizhi:!1,proId:\"\",productDesc:[],productimg:[],temp:\"\",addressList:{},onlyimg:!1,commentList:[],num:0,freight:0,freightPrice:0,freightTypeId:\"\"}},methods:{toggleimg:function(t){this.onlyimg=t,this.showcomments()},toggletab:function(t){this.num=t},countdown:function(){var t=Date.parse(new Date(this.jsqtime))-Date.parse(new Date);0==t&&(this.detail.switch=1,this.jsqtime=this.detail.crush.endTime);var s=parseInt(t/1e3/60/60/24),i=parseInt(t/1e3/60/60%24),e=parseInt(t/1e3/60%60),a=parseInt(t/1e3%60);this.day=s,this.hr=9<i?i:\"0\"+i,this.min=9<e?e:\"0\"+e,this.sec=9<a?a:\"0\"+a;var r=this;this.t=setTimeout(function(){r.countdown()},1e3)},getDD:function(){var t=this.$route.params.address;null!=t&&(this.addressList=t,this.youdizhi=!0)},addAdd:function(){localStorage.setItem(\"fromc\",\"miaosha\"),this.$router.push({name:\"/user/address\"})},getAddress:function(){var s=this,t=localStorage.getItem(\"token\");if(null!=t&&null!=t){var i=this;this.$axios({method:\"post\",url:\"/address\"}).then(function(t){0<t.length&&t.map(function(t){\"Y\"==t.isDefault&&\"{}\"==a()(i.addressList)&&(i.addressList=t,i.youdizhi=!0)}),i.youdizhi&&s.getExpressPrice()})}},confirm:function(){var s=this,t={addressId:this.addressList.id,quantity:this.quantity,skuId:this.temp};this.$axios({method:\"post\",url:\"/promotion/crush/confirm\",data:t}).then(function(t){\"200\"==t.code?(localStorage.removeItem(\"skuId\"),s.$router.push({name:\"/cartthree\",query:{orderNo:t.object}})):s.$Message.error(t.object)})},getDetail:function(){var i=this;null!=this.$route.query.skuId&&null!=this.$route.query.skuId&&(this.temp=this.$route.query.skuId,localStorage.setItem(\"skuId\",this.temp)),this.$axios({method:\"get\",url:\"/promotion/crush/\"+localStorage.getItem(\"skuId\")}).then(function(t){if(\"200\"==t.code){i.detail=t.object,\"0\"==i.detail.switch?i.jsqtime=i.detail.crush.startTime:i.jsqtime=i.detail.crush.endTime,i.countdown(),console.log(t.object),i.proId=t.object.productItem.productId,i.$axios({method:\"post\",url:\"/product/desc/\"+i.proId}).then(function(t){i.productDesc=t}),i.$axios({method:\"post\",url:\"/product/img/\"+i.proId}).then(function(t){i.productimg=t});var s=i.onlyimg;s=1==s?1:0,i.$axios({method:\"get\",url:\"/comment/search/\"+i.proId+\"/\"+s}).then(function(t){\"200\"==t.code&&(i.commentList=t.object)}),i.getExpressPrice()}})},getExpressPrice:function(){var s=this;this.$axios({method:\"post\",url:\"/order/getShipPrice\",data:{price:[this.freightPrice],province:this.addressList.receiveProvince,quantity:[this.quantity],typeIds:[this.freightTypeId]}}).then(function(t){200==t.code&&(s.freight=t.object)})}},watch:{quantity:function(t,s){this.getExpressPrice()}},mounted:function(){this.getAddress(),this.getDetail(),this.getDD()},destroyed:function(){clearTimeout(this.t)}},n={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e(\"div\",{staticClass:\"font-16\"},[e(\"div\",{staticClass:\"m_header_bar\"},[e(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/seckill\"}},[e(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),i._v(\" \"),e(\"span\",{staticClass:\"m_header_bar_title\"},[i._v(\"秒杀详情\")])],1),i._v(\" \"),e(\"div\",{staticClass:\"detail\"},[e(\"div\",{staticClass:\"tp\"},[e(\"img\",{attrs:{src:i._f(\"imgfilter\")(i.detail.productItem.listImg)}}),i._v(\" \"),e(\"div\",{staticClass:\"cursh-wrap\"},[e(\"p\",{staticClass:\"jg\"},[e(\"span\",{staticClass:\"color-dx\"},[i._v(\"秒杀价:￥\"+i._s(i._f(\"pricefilter\")(i.detail.crush.salePrice)))]),i._v(\" \"),e(\"span\",{staticClass:\"yj\"},[i._v(\"原价:￥\"+i._s(i._f(\"pricefilter\")(i.detail.productItem.salePrice)))])]),i._v(\" \"),e(\"div\",{staticClass:\"djs\"},[0==i.detail.switch?e(\"p\",[i._v(\"距开始还有\")]):e(\"p\",[i._v(\"距结束还剩\")]),i._v(\" \"),e(\"span\",[i._v(i._s(i.day+\"天 \"+i.hr+\":\"+i.min+\":\"+i.sec))])])])]),i._v(\" \"),e(\"div\",{staticClass:\"chooseAddress\"},[i.youdizhi?e(\"ul\",{staticClass:\"address\"},[e(\"li\",[e(\"p\",[e(\"strong\",[i._v(i._s(i.addressList.person)+\" \"),e(\"label\",[i._v(i._s(i.addressList.phone))])]),i._v(\" \"),e(\"span\",[i._v(i._s(i.addressList.receiveProvince)+i._s(i.addressList.receiveCity)+i._s(i.addressList.receiveDistrict)+i._s(i.addressList.address))])]),i._v(\" \"),e(\"Icon\",{attrs:{type:\"ios-arrow-forward\"},nativeOn:{click:function(t){return i.addAdd(t)}}})],1),i._v(\" \"),e(\"li\",{staticClass:\"freight\"},[i._v(\"运费:\"),e(\"span\",{staticClass:\"color-newred\",staticStyle:{color:\"#ff0000\"}},[i._v(\"￥\"+i._s(i._f(\"pricefilter\")(i.freight)))])])]):e(\"div\",{staticClass:\"zeroAddress\"},[e(\"div\",{on:{click:i.addAdd}},[i._v(\"\\n\\t\\t\\t\\t\\t\\t\\t请选择收货地址\\n\\t\\t\\t\\t\\t\\t\\t\"),e(\"Icon\",{staticClass:\"float float1\",attrs:{type:\"ios-arrow-forward\"}})],1)])]),i._v(\" \"),e(\"div\",{staticClass:\"xq\"},[e(\"p\",[i._v(i._s(i.detail.product.modelName))]),i._v(\" \"),e(\"div\",[i._v(\"数量 \"),e(\"InputNumber\",{attrs:{min:1,max:1*i.detail.crush.unitQuantity},model:{value:i.quantity,callback:function(t){i.quantity=t},expression:\"quantity\"}})],1)])]),i._v(\" \"),i._m(0),i._v(\" \"),e(\"div\",{staticClass:\"bg-lightgray padding40\"},[e(\"ul\",{staticClass:\"swith-tab pt50 clearfix\"},[e(\"li\",{class:{active:0==i.num},on:{click:function(t){i.toggletab(0)}}},[i._v(\"商品详情\")]),i._v(\" \"),e(\"li\",{class:{active:1==i.num},on:{click:function(t){i.toggletab(1)}}},[i._v(\"商品参数\")]),i._v(\" \"),e(\"li\",{class:{active:2==i.num},on:{click:function(t){i.toggletab(2)}}},[i._v(\"评价晒单\")])]),i._v(\" \"),e(\"div\",{staticClass:\"intro_bg\"},[e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:0==i.num,expression:\" 0 == num\"}],staticClass:\"pro_intro\"},i._l(i.productimg,function(t,s){return e(\"div\",{key:s},[e(\"img\",{attrs:{src:i._f(\"imgfilter\")(t.imgUrl)}})])})),i._v(\" \"),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:1==i.num,expression:\" 1 == num\"}],staticClass:\"pro_size clearfix\"},i._l(i.productDesc,function(t,s){return e(\"p\",{key:s},[e(\"span\",{staticClass:\"title\"},[i._v(i._s(t.attrCode)+\":\")]),i._v(\" \"),e(\"span\",[i._v(i._s(t.attrValue))])])})),i._v(\" \"),e(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:2==i.num,expression:\" 2 == num\"}],staticClass:\"eval pt50 \"},[e(\"div\",{staticClass:\"clearfix\"},[e(\"div\",{staticClass:\"eval-fl\"},[e(\"h5\",[e(\"span\",{staticClass:\"big-title\",class:{allimg:!i.onlyimg},on:{click:function(t){i.toggleimg(!1)}}},[i._v(\"全部评价\")]),i._v(\" \"),e(\"span\",{staticClass:\"onlyimg\",class:{allimg:i.onlyimg},on:{click:function(t){i.toggleimg(!0)}}},[e(\"i\",{staticClass:\"onlyimg\"}),i._v(\"有图\\n\\t\\t\\t\\t\\t\\t\")])]),i._v(\" \"),e(\"ul\",{staticClass:\"eval-ul\"},i._l(i.commentList,function(s,t){return e(\"li\",{key:t},[e(\"h6\",[e(\"img\",{attrs:{src:i._f(\"imgfilter\")(s.list.iconUrl)}}),i._v(i._s(s.list.nickName))]),i._v(\" \"),e(\"p\",[i._v(i._s(s.list.commentContent))]),i._v(\" \"),e(\"div\",{key:t,staticClass:\"sz\"},i._l(s.imgList,function(t,s){return e(\"span\",[e(\"img\",{attrs:{src:i._f(\"imgfilter\")(t)}})])})),i._v(\" \"),e(\"div\",{staticClass:\"zan\"},[e(\"span\",{staticClass:\"fr\"},[e(\"i\",{staticClass:\"icon-new icon-zan\",class:{\"icon-zan-active\":\"Y\"==s.isZan},on:{click:function(t){i.zan(s.list.id,s.isZan)}}}),i._v(i._s(s.number))]),i._v(i._s(i._f(\"formatDate\")(s.list.commentTime,\"yyyy-MM-dd hh:mm:ss\")))])])}))])])])])]),i._v(\" \"),e(\"div\",{staticClass:\"foot\"},[1==i.detail.switch?e(\"button\",{staticClass:\"miaoshagou\",attrs:{type:\"button\"},on:{click:i.confirm}},[i._v(\"马上抢\")]):e(\"button\",{staticClass:\"btn-disabled\",attrs:{type:\"button\"}},[i._v(\"尚未开始\")])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i(\"div\",{staticClass:\"fuwu\"},[i(\"span\",{staticClass:\"gray\"},[t._v(\"服务\")]),t._v(\" \"),i(\"span\",[t._v(\"○ 官方正品\")]),t._v(\" \"),i(\"span\",[t._v(\"○ 极速发货\")]),t._v(\" \"),i(\"span\",[t._v(\"○ 七天无理由退换货\")])])}]};var o=i(\"VU/8\")(r,n,!1,function(t){i(\"5euh\"),i(\"X9Qj\")},\"data-v-7bc1fed2\",null);s.default=o.exports},X9Qj:function(t,s){}});"}