{"source":"webpackJsonp([36],{L0Hl:function(e,o,i){\"use strict\";Object.defineProperty(o,\"__esModule\",{value:!0});var r=i(\"E4LH\"),t={data:function(){return{orderNo:\"\",addressOption:[],tempinvoice:{},invoiceForm:{bankName:\"\",bankNo:\"\",invoiceCode:\"\",invoiceTitle:\"\",headType:\"个人\",invoiceType:\"增值税普通发票\",receiveAddress:\"\",receivePerson:\"\",registerAddress:\"\",receivePhone:\"\",selectedOptionsAddr:[],registerPhone:\"\"},fpruleValidate:{selectedOptionsAddr:[{required:!0,type:\"array\",message:\"请选择省市区\",trigger:\"change\"}],bankName:[{required:!0,message:\"开户行名称不能为空\",trigger:\"blur\"}],bankNo:[{required:!0,message:\"银行账号不能为空\",trigger:\"blur\"}],invoiceCode:[{required:!0,message:\"纳税人识别码不能为空\",trigger:\"blur\"}],invoiceTitle:[{required:!0,message:\"发票抬头不能为空\",trigger:\"blur\"}],invoiceType:[{required:!0,message:\"发票类型不能为空\",trigger:\"change\"}],receiveAddress:[{required:!0,message:\"详细地址不能为空\",trigger:\"blur\"}],receivePerson:[{required:!0,message:\"收票人姓名不能为空\",trigger:\"blur\"}],receivePhone:[{required:!0,trigger:\"blur\",validator:function(e,o,i){null==o?i(new Error(\"手机号不能为空\")):Object(r.a)(o)?i():i(new Error(\"请输入正确的手机号\"))}}],registerPhone:[{required:!0,message:\"注册电话不能为空\",trigger:\"blur\"}],registerAddress:[{required:!0,message:\"注册地址不能为空\",trigger:\"blur\"}]}}},methods:{goback:function(){this.$router.back(-1)},getParams:function(){this.invoiceForm.orderNo=this.$route.query.orderNo,this.getInvoice(this.$route.query.orderNo)},getInvoice:function(e){var i=this;this.$axios({method:\"get\",url:\"/order/\"+e}).then(function(e){if(\"\"!=e.shippingInvoice){var o=e.shippingInvoice;i.invoiceForm.invoiceTitle=o.invoiceTitle,i.invoiceForm.invoiceType=o.invoiceType,i.invoiceForm.receivePerson=o.receivePerson,i.invoiceForm.receivePhone=o.receivePhone,i.invoiceForm.selectedOptionsAddr=[o.receiveProvince,o.receiveCity,o.receiveDistrict],i.invoiceForm.bankName=o.bankName,i.invoiceForm.bankNo=o.bankNo,i.invoiceForm.headType=o.headType,i.invoiceForm.invoiceCode=o.invoiceCode,i.invoiceForm.receiveAddress=o.receiveAddress,i.invoiceForm.registerAddress=o.registerAddress,i.invoiceForm.registerPhone=o.registerPhone}})},getAddressOption:function(){var o=this;this.$axios({method:\"post\",url:\"/common/address\"}).then(function(e){o.addressOption=e})},addSubmit:function(){var i=this;this.$refs.invoiceForm.validate(function(e){if(e){var o=i.invoiceForm;o.receiveProvince=i.invoiceForm.selectedOptionsAddr[0],o.receiveCity=i.invoiceForm.selectedOptionsAddr[1],o.receiveDistrict=i.invoiceForm.selectedOptionsAddr[2],delete o.selectedOptionsAddr,i.$axios({method:\"post\",url:\"/order/invoice/save\",data:o}).then(function(e){\"200\"==e.code?(i.$Message.success(\"提交成功\"),i.$router.push({path:\"/order/detail\",query:{orderNo:i.invoiceForm.orderNo}})):i.$Message.error(e.msg)})}})}},mounted:function(){this.getParams(),this.getAddressOption()}},n={render:function(){var o=this,e=o.$createElement,i=o._self._c||e;return i(\"div\",{},[i(\"div\",{staticClass:\"wap_header\"},[i(\"span\",{staticClass:\"m_header_bar_back\",on:{click:function(e){o.goback()}}},[i(\"Icon\",{attrs:{type:\"ios-arrow-back\"}}),o._v(\"发票信息\")],1)]),o._v(\" \"),i(\"div\",{staticClass:\"P15 bg-white pt44\"},[i(\"Form\",{ref:\"invoiceForm\",staticStyle:{padding:\"15px\"},attrs:{model:o.invoiceForm,rules:o.fpruleValidate}},[i(\"FormItem\",{attrs:{prop:\"invoiceType\"}},[i(\"RadioGroup\",{model:{value:o.invoiceForm.invoiceType,callback:function(e){o.$set(o.invoiceForm,\"invoiceType\",e)},expression:\"invoiceForm.invoiceType\"}},[i(\"Radio\",{attrs:{label:\"增值税普通发票\"}},[o._v(\"增值税普通发票\")]),o._v(\" \"),i(\"Radio\",{attrs:{label:\"增值税专用发票\"}},[o._v(\"增值税专用发票\")])],1)],1),o._v(\" \"),\"增值税普通发票\"==o.invoiceForm.invoiceType?i(\"div\",[i(\"FormItem\",{attrs:{prop:\"headType\"}},[i(\"RadioGroup\",{model:{value:o.invoiceForm.headType,callback:function(e){o.$set(o.invoiceForm,\"headType\",e)},expression:\"invoiceForm.headType\"}},[i(\"Radio\",{attrs:{label:\"个人\"}},[o._v(\"个人\")]),o._v(\" \"),i(\"Radio\",{attrs:{label:\"公司\"}},[o._v(\"公司\")])],1)],1),o._v(\" \"),\"公司\"==o.invoiceForm.headType?i(\"div\",[i(\"FormItem\",{attrs:{prop:\"invoiceCode\"}},[i(\"Input\",{attrs:{placeholder:\"纳税人识别码\",autocomplete:\"off\"},model:{value:o.invoiceForm.invoiceCode,callback:function(e){o.$set(o.invoiceForm,\"invoiceCode\",e)},expression:\"invoiceForm.invoiceCode\"}})],1)],1):o._e()],1):o._e(),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"invoiceTitle\"}},[i(\"Input\",{attrs:{placeholder:\"发票抬头\",autocomplete:\"off\"},model:{value:o.invoiceForm.invoiceTitle,callback:function(e){o.$set(o.invoiceForm,\"invoiceTitle\",e)},expression:\"invoiceForm.invoiceTitle\"}})],1),o._v(\" \"),\"增值税专用发票\"==o.invoiceForm.invoiceType?i(\"div\",[i(\"h5\",{staticClass:\"color-blue\"},[o._v(\"专用发票必填信息:\")]),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"bankName\"}},[i(\"Input\",{attrs:{placeholder:\"开户行名称\",autocomplete:\"off\"},model:{value:o.invoiceForm.bankName,callback:function(e){o.$set(o.invoiceForm,\"bankName\",e)},expression:\"invoiceForm.bankName\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"bankNo\"}},[i(\"Input\",{attrs:{placeholder:\"银行账号\",autocomplete:\"off\"},model:{value:o.invoiceForm.bankNo,callback:function(e){o.$set(o.invoiceForm,\"bankNo\",e)},expression:\"invoiceForm.bankNo\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"invoiceCode\"}},[i(\"Input\",{attrs:{placeholder:\"纳税人识别码\",autocomplete:\"off\"},model:{value:o.invoiceForm.invoiceCode,callback:function(e){o.$set(o.invoiceForm,\"invoiceCode\",e)},expression:\"invoiceForm.invoiceCode\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"registerAddress\"}},[i(\"Input\",{attrs:{placeholder:\"注册地址\"},model:{value:o.invoiceForm.registerAddress,callback:function(e){o.$set(o.invoiceForm,\"registerAddress\",e)},expression:\"invoiceForm.registerAddress\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"registerPhone\"}},[i(\"Input\",{attrs:{placeholder:\"注册电话\"},model:{value:o.invoiceForm.registerPhone,callback:function(e){o.$set(o.invoiceForm,\"registerPhone\",e)},expression:\"invoiceForm.registerPhone\"}})],1)],1):o._e(),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"receivePerson\"}},[i(\"Input\",{attrs:{placeholder:\"收票人姓名\",autocomplete:\"off\"},model:{value:o.invoiceForm.receivePerson,callback:function(e){o.$set(o.invoiceForm,\"receivePerson\",e)},expression:\"invoiceForm.receivePerson\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"receivePhone\"}},[i(\"Input\",{attrs:{placeholder:\"收票人手机\",autocomplete:\"off\"},model:{value:o.invoiceForm.receivePhone,callback:function(e){o.$set(o.invoiceForm,\"receivePhone\",e)},expression:\"invoiceForm.receivePhone\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"selectedOptionsAddr\"}},[i(\"Cascader\",{attrs:{placeholder:\"选择所在区域\",data:o.addressOption},model:{value:o.invoiceForm.selectedOptionsAddr,callback:function(e){o.$set(o.invoiceForm,\"selectedOptionsAddr\",e)},expression:\"invoiceForm.selectedOptionsAddr\"}})],1),o._v(\" \"),i(\"FormItem\",{attrs:{prop:\"receiveAddress\"}},[i(\"Input\",{attrs:{placeholder:\"详细地址\",autocomplete:\"off\"},model:{value:o.invoiceForm.receiveAddress,callback:function(e){o.$set(o.invoiceForm,\"receiveAddress\",e)},expression:\"invoiceForm.receiveAddress\"}})],1)],1),o._v(\" \"),i(\"div\",{staticClass:\"btn-wrap\"},[i(\"Button\",{staticClass:\"btn-red\",attrs:{type:\"primary\",long:\"\"},on:{click:o.addSubmit}},[o._v(\"保存\")])],1)],1)])},staticRenderFns:[]};var c=i(\"VU/8\")(t,n,!1,function(e){i(\"yJuZ\")},\"data-v-7b31ed38\",null);o.default=c.exports},yJuZ:function(e,o){}});"}