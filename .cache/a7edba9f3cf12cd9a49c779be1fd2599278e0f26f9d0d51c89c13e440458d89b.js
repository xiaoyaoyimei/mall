{"source":"webpackJsonp([38],{T3O0:function(e,r,t){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var o={data:function(){var o=this;return{mobile:\"\",forgetForm:{passWord:\"\",confirmpassWord:\"\"},ruleValidate:{passWord:[{required:!0,message:\"新密码不能为空\",trigger:\"blur\"},{type:\"string\",min:6,message:\"新密码不能少于6位\",trigger:\"blur\"}],confirmpassWord:[{required:!0,validator:function(e,r,t){\"\"===r?t(new Error(\"请再次输入密码\")):r!==o.forgetForm.passWord?t(new Error(\"两次输入密码不一致!\")):t()},trigger:\"blur\"}]}}},methods:{getDx:function(){var t=this,e=this.regiForm.verificationCode;null==e||\"\"==e?this.$Message.error(\"图形码不能为空!\"):this.$axios({method:\"post\",url:\"/customer/register/shortmessage\",data:{mobile:this.regiForm.mobile,verificationCode:this.regiForm.verificationCode}}).then(function(e){if(200==e.code){var r=t;r.sendMsgDisabled=!0,r.startTime()}else t.$Message.error(e.msg)})},startTime:function(){0==this.time?(this.time=180,this.sendMsgDisabled=!1,clearTimeout(this.t)):this.time--;var e=this;this.t=setTimeout(function(){e.startTime()},1e3)},getTx:function(){var r=this;\"\"!=this.forgetForm.mobile&&null!=this.forgetForm.mobile?this.$axios({method:\"post\",url:\"/customer/validate?userName=\"+this.regiForm.mobile}).then(function(e){if(\"200\"!==e.code){r.txv++;window.location.origin;r.verimg=r.$axios.defaults.baseURL+\"/customer/\"+r.regiForm.mobile+\"/verification.png?v=\"+r.txv}else r.$Message.error(\"该手机号不存在，请注册\")}):this.$Message.error(\"手机号不能为空\")},handleSubmit:function(){var o=this;\"\"!=this.forgetForm.mobile?this.$refs.forgetForm.validate(function(e){var r=o.mobile;if(e){var t={mobile:r,password:o.forgetForm.passWord};o.$axios({method:\"post\",url:\"/customer/reset/password\",data:t}).then(function(e){200==e.code?(o.$Message.success({content:\"找回密码成功,2秒后自动跳往登录页\",duration:2}),setTimeout(function(){o.$router.push({path:\"/login\",params:{loginName:r}})},3e3)):o.$Message.error(e.object)})}}):this.$Message.error(\"手机号不能为空\")}},mounted:function(){this.mobile=this.$route.query.mobile}},s={render:function(){var r=this,e=r.$createElement,t=r._self._c||e;return t(\"div\",[t(\"div\",{staticClass:\"m_header_bar bg-red\"},[t(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/login\"}},[t(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),r._v(\" \"),t(\"span\",{staticClass:\"m_header_bar_title\"},[r._v(\"重置密码\")])],1),r._v(\" \"),t(\"div\",{staticClass:\"log-forget\"},[t(\"Form\",{ref:\"forgetForm\",staticClass:\"form_wrap\",attrs:{model:r.forgetForm,rules:r.ruleValidate}},[t(\"FormItem\",[t(\"span\",{staticClass:\"font-16 text-center\"},[r._v(\" \"+r._s(r.mobile))])]),r._v(\" \"),t(\"FormItem\",{attrs:{prop:\"passWord\"}},[t(\"Input\",{attrs:{placeholder:\"请输入新密码\",type:\"password\"},model:{value:r.forgetForm.passWord,callback:function(e){r.$set(r.forgetForm,\"passWord\",e)},expression:\"forgetForm.passWord\"}})],1),r._v(\" \"),t(\"FormItem\",{attrs:{prop:\"confirmpassWord\"}},[t(\"Input\",{attrs:{placeholder:\"请确认新密码\",type:\"password\"},model:{value:r.forgetForm.confirmpassWord,callback:function(e){r.$set(r.forgetForm,\"confirmpassWord\",e)},expression:\"forgetForm.confirmpassWord\"}})],1),r._v(\" \"),t(\"FormItem\",[t(\"Button\",{staticClass:\"btn-red\",attrs:{type:\"primary\"},on:{click:function(e){r.handleSubmit()}}},[r._v(\"确定\")])],1)],1)],1)])},staticRenderFns:[]};var i=t(\"VU/8\")(o,s,!1,function(e){t(\"xHdZ\")},\"data-v-39b481c6\",null);r.default=i.exports},xHdZ:function(e,r){}});"}