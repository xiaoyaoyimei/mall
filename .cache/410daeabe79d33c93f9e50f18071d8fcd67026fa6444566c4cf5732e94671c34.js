{"source":"webpackJsonp([20],{\"/Cxr\":function(e,r){},r2Oo:function(e,r,i){\"use strict\";Object.defineProperty(r,\"__esModule\",{value:!0});var s=i(\"E4LH\"),t={data:function(){var i=this;return{t:\"\",time:180,sendMsgDisabled:!1,txv:1,verimg:\"\",regiForm:{passWord:\"\",loginName:\"\",shortMessage:\"\",verificationCode:\"\"},ruleValidate:{passWord:[{required:!0,message:\"密码不能为空\",trigger:\"blur\"},{type:\"string\",min:6,message:\"密码不能少于6位\",trigger:\"blur\"}],mobile:[{required:!0,validator:function(e,r,t){null==r?t(new Error(\"手机号不能为空\")):Object(s.a)(r)?t(i.getTx()):t(new Error(\"请输入正确的手机号\"))},trigger:\"blur\"}],verificationCode:[{required:!0,validator:function(e,r,t){null==r?t(new Error(\"图形验证码不能为空\")):t()},trigger:\"blur\"}],shortMessage:[{required:!0,message:\"短信验证码\",trigger:\"blur\"}]}}},methods:{getDx:function(){var t=this,e=this.regiForm.verificationCode;null==e||\"\"==e?this.$Message.error(\"图形码不能为空!\"):this.$axios({method:\"post\",url:\"/customer/register/shortmessage\",data:{mobile:this.regiForm.mobile,verificationCode:this.regiForm.verificationCode}}).then(function(e){if(200==e.code){var r=t;r.sendMsgDisabled=!0,r.startTime()}else t.$Message.error(e.msg)})},startTime:function(){0==this.time?(this.time=180,this.sendMsgDisabled=!1,clearTimeout(this.t)):this.time--;var e=this;this.t=setTimeout(function(){e.startTime()},1e3)},getTx:function(){var r=this;\"\"!=this.regiForm.mobile&&null!=this.regiForm.mobile?this.$axios({method:\"post\",url:\"/customer/validate?userName=\"+this.regiForm.mobile}).then(function(e){if(\"200\"!==e.code){r.txv++;window.location.origin;r.verimg=r.$axios.defaults.baseURL+\"/customer/\"+r.regiForm.mobile+\"/verification.png?v=\"+r.txv}else r.$Message.error(\"该手机号不存在，请注册\")}):this.$Message.error(\"手机号不能为空\")},handleSubmit:function(){var t=this;\"\"!=this.regiForm.mobile?this.$refs.regiForm.validate(function(e){if(e){var r={mobile:t.regiForm.mobile,password:t.regiForm.passWord,shortMessage:t.regiForm.shortMessage};t.$axios({method:\"post\",url:\"/customer/reset/password\",data:r}).then(function(e){var r=e.code;e.msg;200!==r?t.$Message.error(e.object):t.$router.push({path:\"/login\",query:{loginName:t.regiForm.mobile}})})}}):this.$Message.error(\"手机号不能为空\")},handleReset:function(e){this.$refs[e].resetFields()}},destroyed:function(){clearTimeout(this.t)}},o={render:function(){var r=this,e=r.$createElement,t=r._self._c||e;return t(\"div\",{staticClass:\"reg\"},[t(\"div\",{staticClass:\"m_header_bar\"},[t(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/login\"}},[t(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),r._v(\" \"),t(\"span\",{staticClass:\"m_header_bar_title\"},[r._v(\"找回密码\")])],1),r._v(\" \"),t(\"div\",{staticClass:\"content\"},[t(\"Form\",{ref:\"regiForm\",attrs:{model:r.regiForm,\"label-position\":\"left\",\"label-width\":100,rules:r.ruleValidate}},[t(\"FormItem\",{attrs:{label:\"手机号\",prop:\"mobile\"}},[t(\"Input\",{attrs:{placeholder:\"请输入手机号\",value:r.regiForm.mobile},nativeOn:{blur:function(e){r.getTx()}},model:{value:r.regiForm.mobile,callback:function(e){r.$set(r.regiForm,\"mobile\",\"string\"==typeof e?e.trim():e)},expression:\"regiForm.mobile\"}})],1),r._v(\" \"),t(\"FormItem\",{staticClass:\"clearfix\",attrs:{label:\"图形码\",prop:\"verificationCode\"}},[t(\"div\",{staticClass:\"clearfix\"},[t(\"Input\",{staticClass:\"txm\",attrs:{placeholder:\"请输入图形验证码\"},model:{value:r.regiForm.verificationCode,callback:function(e){r.$set(r.regiForm,\"verificationCode\",e)},expression:\"regiForm.verificationCode\"}}),r._v(\" \"),t(\"img\",{staticClass:\"tx\",attrs:{src:r.verimg},on:{click:r.getTx}}),r._v(\" \"),t(\"img\",{attrs:{src:i(\"t6Qe\")}})],1)]),r._v(\" \"),t(\"FormItem\",{attrs:{label:\"短信码\",prop:\"shortMessage\"}},[t(\"div\",{staticClass:\"clearfix\"},[t(\"Input\",{staticClass:\"txm\",attrs:{placeholder:\"请输入短信验证码\"},model:{value:r.regiForm.shortMessage,callback:function(e){r.$set(r.regiForm,\"shortMessage\",e)},expression:\"regiForm.shortMessage\"}}),r._v(\" \"),r.sendMsgDisabled?t(\"Button\",[t(\"span\",[r._v(r._s(r.time+\"秒后获取\"))])]):t(\"Button\",{nativeOn:{click:function(e){return r.getDx(e)}}},[t(\"span\",[r._v(\"获取短信码\")])])],1)]),r._v(\" \"),t(\"FormItem\",{attrs:{label:\"密码\",prop:\"passWord\"}},[t(\"Input\",{attrs:{placeholder:\"请输入新密码\"},model:{value:r.regiForm.passWord,callback:function(e){r.$set(r.regiForm,\"passWord\",e)},expression:\"regiForm.passWord\"}})],1),r._v(\" \"),t(\"FormItem\",[t(\"Button\",{attrs:{type:\"primary\"},on:{click:function(e){r.handleSubmit()}}},[r._v(\"找回密码\")]),r._v(\" \"),t(\"Button\",{staticStyle:{\"margin-left\":\"8px\"},attrs:{type:\"ghost\"},on:{click:function(e){r.handleReset()}}},[r._v(\"重置\")])],1)],1)],1)])},staticRenderFns:[]};var a=i(\"VU/8\")(t,o,!1,function(e){i(\"/Cxr\")},\"data-v-00ac51e4\",null);r.default=a.exports},t6Qe:function(e,r){e.exports=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACL0lEQVRYR8WX3TEEQRSFz0aAN2+IABEgAkSACBABGSACNgMiQASIAI+eEAH1qb5bPXd6ZnrGzM6tUrZqu/uec+7vTjSyTUb2r3kCeJb0I2kzJt0FwKKkdUnbTr0HSS+SvipUxTlW8NkGwKGkXUl7DWG7lcTf1J3rDACmZ44xTJH0LThZlbQRlDG/fH8qCWWwTgBgfR0e+JZ0LummRmbCg0KXkhbCvaNwpzUAHjkOjyDnSY1jHxWAcP8gfMFn7mfnQMzcGHSp2Pgdu9+YhMTzNZwmhqDPMVjDmP+xkRtx4jYCIIPJ9ruMjI8dkR8ka519SFqOD/gyBO1TOLAWZXmOAp5p6g4JbJVTToggN4lH0hG/wc0rALoVSfuhmcwdQLJWh0QRK0DHu5f0LolKGMKoEN6mS5ZywAA8JgZNX2CswpiIfyBSCgwJAKdM0h2bETEA5PlMKNMXe96xHFuytu6rgFnOEGnbA3JAWodlqM26pQdgMWrTgnOcc4ZhdOF7jAdgw4N+gAp9mvWYwnBLbUTJg/9EYsRKJZ4CYIfJB7J1VrMdQTAj6C/EvTTaq3ZCywWcA6Jq0WzChFOcAyI5XasAcJFdjpolJMyGtkrEzNkhaXQlInVbcQwCpsz7qww1uMdE5TxW6dx3wpScfreDAeFBHZThcQylqHM2H5hanTfukrm/C3gURltNQQ/f0845byt55bVcAPaAsYSp/UIymU0dFCpsPXWg2wLIFCD/2OgAfgEP0nQhqurRZAAAAABJRU5ErkJggg==\"}});"}