{"source":"webpackJsonp([8],{\"9bBU\":function(e,t,a){a(\"mClu\");var i=a(\"FeBl\").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a(\"9bBU\"),__esModule:!0}},GREC:function(e,t){},US3a:function(e,t){},bOdI:function(e,t,a){\"use strict\";t.__esModule=!0;var i,s=a(\"C4MV\"),n=(i=s)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,n.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},\"cZ/S\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,s=a(\"bOdI\"),n=a.n(s),r={data:function(){var e;return e={imgmust:\"N\",reasonList:[],defaultList:[],imgName:\"\",visible:!1,uploadImgs:\"\",loading:!1,refundorder:\"\",evauploadList:[],evaluationList:[],uploadUrl:this.$axios.defaults.baseURL+\"/upload/upload?path=account\",evaluationreason:\"\"},n()(e,\"evauploadList\",[]),n()(e,\"evaImgs\",[]),n()(e,\"evaItem\",{}),n()(e,\"orderNo\",\"\"),n()(e,\"index\",\"\"),n()(e,\"ruleValidate\",{refundCauseId:[{required:!0,message:\"请选择退款退货原因\",trigger:\"change\"}]}),e},methods:(i={handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},videoSuccess:function(e,t){\"200\"==e.code&&(t.url=e.msg,this.refundForm.refundVideo=e.msg)},handleSuccess:function(e,t){\"200\"==e.code&&(t.url=e.msg,t.name=e.msg)},handleFormatError:function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 jpg 或 png.\"})}},n()(i,\"handleFormatError\",function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 jpg 或 png.\"})}),n()(i,\"evauploadhandleSuccess\",function(e,t){\"200\"==e.code&&(t.url=e.msg,t.name=e.msg)}),n()(i,\"evahandleBeforeUpload\",function(){var e=this.evauploadList.length<5;return e||this.$Notice.warning({title:\"最多可上传5张图片.\"}),e}),n()(i,\"handleMaxSize\",function(e){this.$Notice.warning({title:\"文件大小超过限制\",desc:\"上传文件 太大，不超过2M.\"})}),n()(i,\"handleBeforeUpload\",function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:\"最多可上传9张图片.\"}),e}),n()(i,\"videohandleFormatError\",function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 mp4 或 avi 或flv.\"})}),n()(i,\"videoSuccess\",function(e,t){\"200\"==e.code&&(t.url=e.msg,this.refundForm.refundVideo=e.msg)}),n()(i,\"img_must\",function(e){for(var t=0;t<this.reasonList.length;t++)this.reasonList[t].causeId==e&&(this.imgmust=this.reasonList[t].isImg)}),n()(i,\"getOrder\",function(){var t=this;this.$axios({method:\"get\",url:\"/order/\"+this.orderNo}).then(function(e){t.evaItem=e.shippingOrderItems[t.index]})}),n()(i,\"getParams\",function(){this.orderNo=this.$route.query.rforder,this.index=this.$route.query.index}),n()(i,\"evaluation\",function(){var a=this;this.loading=!0;var e=0;if(e=0<this.evauploadList.length?1:0,\"\"==this.evaluationreason)return this.$Message.warning(\"请填写评价\"),void setTimeout(function(){a.loading=!1},2e3);this.evauploadList.forEach(function(e,t){a.evaImgs[t]=e.url+\",\"});var i=\"\";this.evaImgs.forEach(function(e,t){i+=e}),i=\",\"==i.slice(i.length-1)?i.slice(0,-1):i;this.$axios({method:\"post\",url:\"/comment/create\",data:{commentContent:this.evaluationreason,commentPics:i,orderItemsId:this.evaItem.orderItemsId,productId:this.evaItem.productItemId,isImg:e}}).then(function(e){\"200\"==e.code?a.$Message.info(e.msg):a.$Message.error(e.msg),a.evaluationModal=!1,a.$router.push(\"/user/orderlist\")}),setTimeout(function(){a.loading=!1},2e3)}),i),mounted:function(){this.getParams(),this.getOrder(),this.evauploadList=this.$refs.evaupload.fileList}},o={render:function(){var a=this,e=a.$createElement,i=a._self._c||e;return i(\"div\",[i(\"div\",{staticClass:\"m_header_bar\"},[i(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/user/orderlist\"}},[i(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),a._v(\" \"),i(\"span\",{staticClass:\"m_header_bar_title\"},[a._v(\"商品评价\")]),a._v(\" \"),i(\"span\",{staticClass:\"m_header_bar_menu\"})],1),a._v(\" \"),i(\"div\",{staticClass:\"evaluation\"},[i(\"div\",{staticClass:\"refund clearfix\"},[i(\"p\",[a._v(\"商品名称\")]),a._v(\" \"),i(\"div\",{staticClass:\"refundImg\"},[i(\"img\",{attrs:{src:a._f(\"imgfilter\")(a.evaItem.productItemImg),alt:\"\"}}),a._v(\" \"),i(\"div\",{staticClass:\"evaluationText\"},[i(\"p\",{staticClass:\"p\"},[a._v(a._s(a.evaItem.productTitle))]),a._v(\" \"),i(\"p\",{staticClass:\"p\"},[a._v(a._s(a.evaItem.productAttrs))])])])]),a._v(\" \"),i(\"div\",{staticClass:\"refund clearfix\"},[i(\"p\",{staticClass:\"pp\"},[a._v(\"商品评价\")]),a._v(\" \"),i(\"i-input\",{staticClass:\"evaluationreason\",attrs:{type:\"textarea\"},model:{value:a.evaluationreason,callback:function(e){a.evaluationreason=e},expression:\"evaluationreason\"}})],1),a._v(\" \"),i(\"div\",{staticClass:\"refund refundLast clearfix\"},[i(\"p\",[a._v(\"上传图片\")]),a._v(\" \"),i(\"div\",{staticClass:\"user-con-wrap \"},[a._l(a.evauploadList,function(t){return i(\"div\",{staticClass:\"demo-upload-list\"},[\"finished\"===t.status?[i(\"img\",{attrs:{src:a._f(\"imgfilter\")(t.url)}}),a._v(\" \"),i(\"div\",{staticClass:\"demo-upload-list-cover\"},[i(\"Icon\",{attrs:{type:\"ios-eye-outline\"},nativeOn:{click:function(e){a.handleView(t.name)}}}),a._v(\" \"),i(\"Icon\",{attrs:{type:\"ios-trash-outline\"},nativeOn:{click:function(e){a.evahandleRemove(t)}}})],1)]:[t.showProgress?i(\"Progress\",{attrs:{percent:t.percentage,\"hide-info\":\"\"}}):a._e()]],2)}),a._v(\" \"),i(\"Upload\",{ref:\"evaupload\",staticStyle:{display:\"inline-block\",width:\"78px\"},attrs:{\"show-upload-list\":!1,\"default-file-list\":a.evaluationList,\"on-success\":a.evauploadhandleSuccess,format:[\"jpg\",\"jpeg\",\"png\"],\"max-size\":2048,\"on-format-error\":a.handleFormatError,\"on-exceeded-size\":a.handleMaxSize,\"before-upload\":a.evahandleBeforeUpload,multiple:\"\",type:\"drag\",action:a.uploadUrl}},[i(\"div\",{staticStyle:{width:\"78px\",height:\"78px\",\"line-height\":\"78px\"}},[i(\"Icon\",{attrs:{type:\"ios-camera\",size:\"20\"}})],1)])],2)])]),a._v(\" \"),i(\"div\",{staticClass:\"btn-wrap\"},[i(\"Button\",{staticClass:\"btn-red\",attrs:{type:\"primary\",long:\"\"},on:{click:a.evaluation}},[a._v(\"提交\")])],1)])},staticRenderFns:[]};var l=a(\"VU/8\")(r,o,!1,function(e){a(\"US3a\"),a(\"GREC\")},\"data-v-16dc0289\",null);t.default=l.exports},mClu:function(e,t,a){var i=a(\"kM2E\");i(i.S+i.F*!a(\"+E39\"),\"Object\",{defineProperty:a(\"evD5\").f})}});"}