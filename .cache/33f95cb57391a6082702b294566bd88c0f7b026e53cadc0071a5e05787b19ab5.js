{"source":"webpackJsonp([8],{\"6lHZ\":function(e,t){},\"9bBU\":function(e,t,a){a(\"mClu\");var i=a(\"FeBl\").Object;e.exports=function(e,t,a){return i.defineProperty(e,t,a)}},C4MV:function(e,t,a){e.exports={default:a(\"9bBU\"),__esModule:!0}},bOdI:function(e,t,a){\"use strict\";t.__esModule=!0;var i,s=a(\"C4MV\"),r=(i=s)&&i.__esModule?i:{default:i};t.default=function(e,t,a){return t in e?(0,r.default)(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},\"cZ/S\":function(e,t,a){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i,s=a(\"bOdI\"),r=a.n(s),n={data:function(){var e;return e={imgmust:\"N\",reasonList:[],defaultList:[],imgName:\"\",visible:!1,uploadImgs:\"\",loading:!1,refundorder:\"\",evauploadList:[],evaluationList:[],productId:\"\",uploadUrl:this.$axios.defaults.baseURL+\"/upload/upload?path=account\",evaluationreason:\"\"},r()(e,\"evauploadList\",[]),r()(e,\"evaImgs\",[]),r()(e,\"evaItem\",{}),r()(e,\"orderNo\",\"\"),r()(e,\"index\",\"\"),r()(e,\"ruleValidate\",{refundCauseId:[{required:!0,message:\"请选择退款退货原因\",trigger:\"change\"}]}),e},methods:(i={handleView:function(e){this.imgName=e,this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},videoSuccess:function(e,t){\"200\"==e.code&&(t.url=e.msg,this.refundForm.refundVideo=e.msg)},handleSuccess:function(e,t){\"200\"==e.code&&(t.url=e.msg,t.name=e.msg)},handleFormatError:function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 jpg 或 png.\"})}},r()(i,\"handleFormatError\",function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 jpg 或 png.\"})}),r()(i,\"evauploadhandleSuccess\",function(e,t){\"200\"==e.code&&(t.url=e.msg,t.name=e.msg)}),r()(i,\"evahandleBeforeUpload\",function(){var e=this.evauploadList.length<5;return e||this.$Notice.warning({title:\"最多可上传5张图片.\"}),e}),r()(i,\"handleMaxSize\",function(e){this.$Notice.warning({title:\"文件大小超过限制\",desc:\"上传文件 太大，不超过2M.\"})}),r()(i,\"handleBeforeUpload\",function(){var e=this.uploadList.length<5;return e||this.$Notice.warning({title:\"最多可上传5张图片.\"}),e}),r()(i,\"videohandleFormatError\",function(e){this.$Notice.warning({title:\"文件格式不正确\",desc:\"文件格式不正确,请选择 mp4 或 avi 或flv.\"})}),r()(i,\"videoSuccess\",function(e,t){\"200\"==e.code&&(t.url=e.msg,this.refundForm.refundVideo=e.msg)}),r()(i,\"img_must\",function(e){for(var t=0;t<this.reasonList.length;t++)this.reasonList[t].causeId==e&&(this.imgmust=this.reasonList[t].isImg)}),r()(i,\"getOrder\",function(){var t=this;this.$axios({method:\"get\",url:\"/order/\"+this.orderNo}).then(function(e){t.evaItem=e.shippingOrderItems[t.index]})}),r()(i,\"getParams\",function(){this.orderNo=this.$route.query.rforder,this.index=this.$route.query.index,this.productId=this.$route.query.productId}),r()(i,\"evaluation\",function(){var a=this;console.log(this.evaItem),this.loading=!0;var e=0;if(e=0<this.evauploadList.length?1:0,\"\"==this.evaluationreason)return this.$Message.warning(\"请填写评价\"),void setTimeout(function(){a.loading=!1},2e3);this.evauploadList.forEach(function(e,t){a.evaImgs[t]=e.url+\",\"});var i=\"\";this.evaImgs.forEach(function(e,t){i+=e}),i=\",\"==i.slice(i.length-1)?i.slice(0,-1):i;this.$axios({method:\"post\",url:\"/comment/create\",data:{commentContent:this.evaluationreason,commentPics:i,orderItemsId:this.evaItem.orderItemsId,productId:this.productId,isImg:e}}).then(function(e){\"200\"==e.code?a.$Message.info(e.msg):a.$Message.error(e.msg),a.evaluationModal=!1,a.$router.push(\"/user/myevaluate\")}),setTimeout(function(){a.loading=!1},2e3)}),i),mounted:function(){this.getParams(),this.getOrder(),this.evauploadList=this.$refs.evaupload.fileList}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",[a(\"div\",{staticClass:\"m_header_bar\"},[a(\"router-link\",{staticClass:\"m_header_bar_back\",attrs:{to:\"/user/orderlist\"}},[a(\"Icon\",{attrs:{type:\"ios-arrow-back\"}})],1),t._v(\" \"),a(\"span\",{staticClass:\"m_header_bar_title\"},[t._v(\"商品评价\")]),t._v(\" \"),a(\"span\",{staticClass:\"m_header_bar_menu\"})],1),t._v(\" \"),a(\"div\",{staticClass:\"evaluation\"},[a(\"div\",{staticClass:\"refund clearfix\"},[a(\"div\",{staticClass:\"refundImg\"},[a(\"img\",{attrs:{src:t._f(\"imgfilter\")(t.evaItem.productItemImg),alt:\"\"}}),t._v(\" \"),a(\"div\",{staticClass:\"evaluationText\"},[a(\"p\",{staticClass:\"p\"},[t._v(t._s(t.evaItem.productTitle))]),t._v(\" \"),a(\"p\",{staticClass:\"p\"},[t._v(t._s(t.evaItem.productAttrs))])])])]),t._v(\" \"),a(\"div\",{staticClass:\"refund clearfix\"},[a(\"i-input\",{staticClass:\"evaluationreason\",attrs:{placeholder:\"评价内容\",type:\"textarea\"},model:{value:t.evaluationreason,callback:function(e){t.evaluationreason=e},expression:\"evaluationreason\"}})],1),t._v(\" \"),a(\"div\",{staticClass:\"refund refundLast clearfix\"},[a(\"div\",{staticClass:\"user-con-wrap \"},[t._l(t.evauploadList,function(e){return a(\"div\",{staticClass:\"demo-upload-list\"},[\"finished\"===e.status?[a(\"img\",{attrs:{src:t._f(\"imgfilter\")(e.url)}})]:[e.showProgress?a(\"Progress\",{attrs:{percent:e.percentage,\"hide-info\":\"\"}}):t._e()]],2)}),t._v(\" \"),a(\"Upload\",{ref:\"evaupload\",staticStyle:{display:\"inline-block\",width:\"78px\"},attrs:{\"show-upload-list\":!1,\"default-file-list\":t.evaluationList,\"on-success\":t.evauploadhandleSuccess,format:[\"jpg\",\"jpeg\",\"png\"],\"max-size\":2048,\"on-format-error\":t.handleFormatError,\"on-exceeded-size\":t.handleMaxSize,\"before-upload\":t.evahandleBeforeUpload,multiple:\"\",type:\"drag\",action:t.uploadUrl}},[a(\"div\",{staticStyle:{width:\"78px\",height:\"78px\",\"line-height\":\"78px\"}},[a(\"Icon\",{attrs:{type:\"ios-camera\",size:\"20\"}})],1)])],2)])]),t._v(\" \"),a(\"div\",{staticClass:\"btn-wrap\"},[a(\"Button\",{staticClass:\"btn-red\",attrs:{type:\"primary\",long:\"\"},on:{click:t.evaluation}},[t._v(\"提交\")])],1)])},staticRenderFns:[]};var l=a(\"VU/8\")(n,o,!1,function(e){a(\"l0Dm\"),a(\"6lHZ\")},\"data-v-58a5bebe\",null);t.default=l.exports},l0Dm:function(e,t){},mClu:function(e,t,a){var i=a(\"kM2E\");i(i.S+i.F*!a(\"+E39\"),\"Object\",{defineProperty:a(\"evD5\").f})}});"}