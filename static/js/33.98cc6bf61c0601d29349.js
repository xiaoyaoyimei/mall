webpackJsonp([33],{T3O0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={data:function(){var o=this;return{mobile:"",forgetForm:{passWord:"",confirmpassWord:""},ruleValidate:{passWord:[{required:!0,message:"新密码不能为空",trigger:"blur"},{type:"string",min:6,message:"新密码不能少于6位",trigger:"blur"}],confirmpassWord:[{required:!0,validator:function(e,t,r){""===t?r(new Error("请再次输入密码")):t!==o.forgetForm.passWord?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]}}},methods:{getDx:function(){var r=this,e=this.regiForm.verificationCode;null==e||""==e?this.$Message.error("图形码不能为空!"):this.$axios({method:"post",url:"/customer/register/shortmessage",data:{mobile:this.regiForm.mobile,verificationCode:this.regiForm.verificationCode}}).then(function(e){if(200==e.code){var t=r;t.sendMsgDisabled=!0,t.startTime()}else r.$Message.error(e.msg)})},startTime:function(){0==this.time?(this.time=180,this.sendMsgDisabled=!1,clearTimeout(this.t)):this.time--;var e=this;this.t=setTimeout(function(){e.startTime()},1e3)},getTx:function(){var t=this;""!=this.forgetForm.mobile&&null!=this.forgetForm.mobile?this.$axios({method:"post",url:"/customer/validate?userName="+this.regiForm.mobile}).then(function(e){if("200"!==e.code){t.txv++;window.location.origin;t.verimg=t.$axios.defaults.baseURL+"/customer/"+t.regiForm.mobile+"/verification.png?v="+t.txv}else t.$Message.error("该手机号不存在，请注册")}):this.$Message.error("手机号不能为空")},handleSubmit:function(){var o=this;""!=this.forgetForm.mobile?this.$refs.forgetForm.validate(function(e){var t=o.mobile;if(e){var r={mobile:t,password:o.forgetForm.passWord};o.$axios({method:"post",url:"/customer/reset/password",data:r}).then(function(e){200==e.code?(o.$Message.success({content:"找回密码成功,2秒后自动跳往登录页",duration:2}),setTimeout(function(){o.$router.push({path:"/login",params:{loginName:t}})},3e3)):o.$Message.error(e.object)})}}):this.$Message.error("手机号不能为空")}},mounted:function(){this.mobile=this.$route.query.mobile}},s={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"m_header_bar bg-red"},[r("router-link",{staticClass:"m_header_bar_back",attrs:{to:"/login"}},[r("Icon",{attrs:{type:"ios-arrow-back"}})],1),t._v(" "),r("span",{staticClass:"m_header_bar_title"},[t._v("重置密码")])],1),t._v(" "),r("div",{staticClass:"log-forget"},[r("Form",{ref:"forgetForm",staticStyle:{"font-size":"16px"},attrs:{model:t.forgetForm,rules:t.ruleValidate}},[r("FormItem",[r("span",{staticClass:"font-16 text-center"},[t._v(" "+t._s(t.mobile))])]),t._v(" "),r("FormItem",{attrs:{prop:"passWord"}},[r("Input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:t.forgetForm.passWord,callback:function(e){t.$set(t.forgetForm,"passWord",e)},expression:"forgetForm.passWord"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"confirmpassWord"}},[r("Input",{attrs:{placeholder:"请确认新密码",type:"password"},model:{value:t.forgetForm.confirmpassWord,callback:function(e){t.$set(t.forgetForm,"confirmpassWord",e)},expression:"forgetForm.confirmpassWord"}})],1),t._v(" "),r("FormItem",{staticStyle:{"margin-top":"2rem"}},[r("Button",{staticClass:"btn-red",attrs:{type:"primary"},on:{click:function(e){t.handleSubmit()}}},[t._v("确定")])],1)],1)],1)])},staticRenderFns:[]};var i=r("VU/8")(o,s,!1,function(e){r("nsu9")},"data-v-b853f4a4",null);t.default=i.exports},nsu9:function(e,t){}});